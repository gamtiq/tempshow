{"version":3,"file":"tempshow.js","sources":["../src/TempShow.js"],"sourcesContent":["/**\n * Component to temporary show some elements.\n */\n\nimport PropTypes from 'prop-types';\nimport React, {PureComponent} from 'react';\n\n/**\n * Class of component to temporary show some elements.\n *\n * @extends {PureComponent}\n */\nexport default class TempShow extends PureComponent {\n    /**\n     * Component constructor.\n     *\n     * @param {object} props\n     *      Initial props values.\n     */\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            visible: props.visible\n        };\n\n        this.handleClick = this.handleClick.bind(this);\n        this.handleMouseMove = this.handleMouseMove.bind(this);\n        this.hide = this.hide.bind(this);\n    }\n\n    /**\n     * Component's lifecycle method that is invoked immediately after updating occurs.\n     *\n     * @param {object} prevProps\n     *      Previous props values.\n     * @param {object} prevState\n     *      Previous state.\n     */\n    componentDidUpdate(prevProps, prevState) {\n        const { props, state } = this;\n        if (state.visible === prevState.visible) {\n            const { visible } = props;\n            if (visible !== state.visible) {\n                if (visible) {\n                    this.show();\n                }\n                else {\n                    this.hide();\n                }\n            }\n            else if (visible && (props.postponeAutoHide || props.autoHide !== prevProps.autoHide)) {\n                this.show(props.autoHide);\n            }\n        }\n    }\n\n    /**\n     * Component's lifecycle method that is invoked immediately before a component is unmounted and destroyed.\n     */\n    componentWillUnmount() {\n        this.hide();\n    }\n\n    /**\n     * Cancel component's early scheduled hiding.\n     *\n     * @return {TempShow}\n     *      Reference to component's object (`this`).\n     */\n    cancelHide() {\n        const timeoutId = this.hideTimeoutId;\n        if (timeoutId) {\n            clearTimeout(timeoutId);\n            this.hideTimeoutId = null;\n        }\n\n        return this;\n    }\n\n    /**\n     * Hide component.\n     *\n     * @see #cancelHide\n     * @see #show\n     */\n    hide() {\n        if (this.state.visible) {\n            const { onHide } = this.props;\n            this.cancelHide()\n                .setState({visible: false});\n            if (onHide) {\n                onHide(false, this);\n            }\n        }\n    }\n\n    /**\n     * Show component.\n     *\n     * @param {number} [autoHideTime=this.props.autoHide]\n     *      Number of seconds after which component should be hidden automatically.\n     * @see #cancelHide\n     * @see #hide\n     */\n    show(autoHideTime) {\n        const { props } = this;\n        const autoHide = typeof autoHideTime === 'number'\n            ? autoHideTime\n            : props.autoHide;\n        this.cancelHide();\n        if (autoHide > 0) {\n            // eslint-disable-next-line no-magic-numbers\n            this.hideTimeoutId = setTimeout(this.hide, autoHide * 1000);\n        }\n        if (! this.state.visible) {\n            this.setState({visible: true});\n            if (props.onShow) {\n                props.onShow(true, this);\n            }\n        }\n    }\n\n    /**\n     * Toggle component's visibility.\n     *\n     * @see #hide\n     * @see #show\n     */\n    toggleVisible() {\n        if (this.state.visible) {\n            this.hide();\n        }\n        else {\n            this.show();\n        }\n    }\n\n    /**\n     * Handle mouse click on component.\n     *\n     * @param {SyntheticEvent} eventData\n     *      Data about event.\n     * @see #toggleVisible\n     */\n    handleClick(eventData) {\n        const { props } = this;\n        if (! this.state.visible || props.hideOnAnyClick || props.hideForClick(eventData, this)) {\n            eventData.preventDefault();\n            eventData.stopPropagation();\n            this.toggleVisible();\n        }\n    }\n\n    /**\n     * Handle mouse move over component.\n     *\n     * @param {SyntheticEvent} eventData\n     *      Data about event.\n     * @see #show\n     */\n    handleMouseMove(eventData) {\n        eventData.preventDefault();\n        eventData.stopPropagation();\n        this.show();\n    }\n\n    /**\n     * Component's lifecycle method that is invoked to create component view.\n     *\n     * @return {ReactElement}\n     *      Component view.\n     */\n    render() {\n        const { props } = this;\n        const { children, component: Component, componentRef, hideClassName, hideStyle,\n            showClassName, showOnMouseOver, showStyle, toggleVisibleOnClick } = props;\n        let { className } = props;\n        const { visible } = this.state;\n        const handleClick = (toggleVisibleOnClick && this.handleClick) || null;\n        const handleMove = showOnMouseOver\n            ? this.handleMouseMove\n            : null;\n        const classList = [];\n        if (className) {\n            classList.push(className);\n        }\n        className = visible\n            ? showClassName\n            : hideClassName;\n        if (className) {\n            classList.push(className);\n        }\n    \n        return (\n            <Component\n                ref={componentRef}\n                className={classList.join(' ')}\n                style={visible\n                    ? showStyle\n                    : hideStyle}\n                onClick={handleClick}\n                onTouchEnd={handleClick}\n                onMouseMove={handleMove}\n                onTouchMove={handleMove}\n                onMouseLeave={props.hideOnMouseLeave\n                    ? this.hide\n                    : null}>\n                {children}\n            </Component>\n        );\n    }\n}\n\n/**\n * Id of timeout after which component will be hidden.\n *\n * @type {number}\n * @instance\n * @memberof TempShow\n */\nTempShow.prototype.hideTimeoutId = null;\n\n/**\n * Default function that is used to determine whether component should be hidden on a mouse click.\n *\n * Return `true` when component's root DOM element is clicked.\n *\n * @param {SyntheticEvent} eventData\n *      Data about event.\n * @return {boolean}\n *      `true` when component should be hidden.\n * @static\n * @memberof TempShow\n */\nTempShow.hideForClick = function hideForClick(eventData) {\n    return eventData.currentTarget === eventData.target;\n};\n\nTempShow.propTypes = {\n    /**\n     * Number of seconds after which component should be hidden automatically.\n     * When zero or negative value is specified auto hiding is not applied.\n     */\n    autoHide: PropTypes.number,\n    /**\n     * Component's children.\n     */\n    children: PropTypes.node,\n    /**\n     * A CSS class that should be set for component's root element.\n     */\n    className: PropTypes.string,\n    /**\n     * Component's root element type.\n     */\n    component: PropTypes.elementType,\n    /**\n     * An optional ref callback to get reference to the root (top-most) element of the rendered component.\n     * Just like other refs, this will provide `null` when it unmounts.\n     *\n     * This is helpful if you'd like access the DOM node for a parent Component without needing to use\n     * `ReactDOM.findDOMNode`.\n     */\n    componentRef: PropTypes.oneOfType([\n        PropTypes.func,\n        PropTypes.object,\n    ]),\n    /**\n     * An additional CSS class that should be set for component's root element when component is hidden.\n     */\n    hideClassName: PropTypes.string,\n    /**\n     * Function that will be used to determine whether component should be hidden on a mouse click\n     * when value of `hideOnAnyClick` prop is `false`.\n     * The following arguments will be passed into function: event data (`SyntheticEvent`)\n     * and component's object.\n     * If function returns `true`, component will be hidden.\n     */\n    hideForClick: PropTypes.func,\n    /**\n     * Whether component should be hidden on any mouse click.\n     */\n    hideOnAnyClick: PropTypes.bool,\n    /**\n     * Whether component should be hidden when mouse leaves area of component's root DOM element.\n     */\n    hideOnMouseLeave: PropTypes.bool,\n    /**\n     * Styles that should be assigned for hidden component.\n     */\n    hideStyle: PropTypes.object,\n    /**\n     * Whether component's autohiding should be postponed when component props are changed.\n     */\n    postponeAutoHide: PropTypes.bool,\n    /**\n     * An additional CSS class that should be set for component's root element when component is visible.\n     */\n    showClassName: PropTypes.string,\n    /**\n     * Should component be shown on mouse over?\n     */\n    showOnMouseOver: PropTypes.bool,\n    /**\n     * Styles that should be assigned for visible component.\n     */\n    showStyle: PropTypes.object,\n    /**\n     * Whether component visibility should be toggled on a mouse click.\n     */\n    toggleVisibleOnClick: PropTypes.bool,\n    /**\n     * Should component be visible?\n     * Can be used to explicitly control component's visibility.\n     */\n    visible: PropTypes.bool,\n    /**\n     * Function that should be called on component hidding.\n     */\n    onHide: PropTypes.func,\n    /**\n     * Function that should be called on component show.\n     */\n    onShow: PropTypes.func,\n};\n\nTempShow.defaultProps = {\n    autoHide: 5,\n    component: 'div',\n    hideForClick: TempShow.hideForClick,\n    hideOnAnyClick: false,\n    postponeAutoHide: true,\n    showOnMouseOver: true,\n    toggleVisibleOnClick: true,\n    visible: false\n};\n"],"names":["TempShow","props","state","visible","handleClick","bind","handleMouseMove","hide","prevProps","prevState","show","postponeAutoHide","autoHide","timeoutId","hideTimeoutId","clearTimeout","onHide","cancelHide","setState","autoHideTime","setTimeout","onShow","eventData","hideOnAnyClick","hideForClick","preventDefault","stopPropagation","toggleVisible","children","Component","component","componentRef","hideClassName","hideStyle","showClassName","showOnMouseOver","showStyle","toggleVisibleOnClick","className","handleMove","classList","push","React","join","hideOnMouseLeave","PureComponent","prototype","currentTarget","target","propTypes","PropTypes","number","node","string","elementType","oneOfType","func","object","bool","defaultProps"],"mappings":"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"}